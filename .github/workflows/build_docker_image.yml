---
name: Docker build

on:
  workflow_call:
    inputs:
      prefix:
        required: true
        type: string
      registry-image:
        required: true
        type: string
      platforms:
        required: true
        type: string
      fips:
        required: false
        type: boolean
        default: false

env:
  REGISTRY: ghcr.io

jobs:
  build-and-push-image:
    uses: Cosmian/reusable_workflows/.github/workflows/build_docker_image.yml@add-workflows
    secrets: inherit
