[package]
name = "cosmian_kms_cli"
version = "4.9.1"
edition = "2021"
license-file = "../../LICENSE.md"
description = "CLI used to manage the Cosmian KMS."

[[bin]]
name = "ckms"
path = "src/main.rs"

[features]
# Staging is used to run tests with the remote kms test server. Otherwise, the test runs a local kms server.
staging = []

[dependencies]
actix-web = { workspace = true }
base64 = { workspace = true }
clap = { workspace = true }
cloudproof = { workspace = true }
cosmian_kmip = { path = "../kmip" }
cosmian_kms_client = { path = "../client" }
cosmian_kms_utils = { path = "../utils" }
cosmian_logger = { path = "../logger" }
der = { workspace = true }
hex = { workspace = true }
## openssl is only used to parse PKCS#12 files because native support is not yet available in Rust yet.
## It should not be used for anything else and will be removed once native support is available.
openssl = { version = "0.10", features = ["vendored"] }
oauth2 = { version = "4.4" }
pem = "3.0"
rand = "0.8"
ratls = { workspace = true }
reqwest = { workspace = true }
rustls = { workspace = true }
tee_attestation = { workspace = true }
serde = { workspace = true }
serde_json = { workspace = true }
strum = { workspace = true }
thiserror = { workspace = true }
tokio = { workspace = true }
tracing = { workspace = true }
url = { workspace = true }
uuid = { workspace = true }
x509-cert = { workspace = true }
zeroize = { workspace = true }

[dev-dependencies]
actix-rt = { workspace = true }
actix-server = { version = "2.3", default-features = false }
assert_cmd = "2.0"
const-oid = { workspace = true }
cosmian_kms_client = { path = "../client", default-features = false }
cosmian_kms_server = { path = "../server", features = [
    "insecure",
], default-features = false }
oauth2 = { version = "4.4" }
predicates = "3.0"
regex = { version = "1.7", default-features = false }
tempfile = "3.8"
