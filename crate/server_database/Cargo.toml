[package]
name = "cosmian_kms_server_database"
version.workspace = true
authors.workspace = true
edition.workspace = true
license.workspace = true
repository.workspace = true
rust-version.workspace = true
description = "Crate containing the database for the Cosmian KMS server and the supported stores"

[lib]
doctest = false

[dependencies]
async-trait = { workspace = true }
#clap = { workspace = true, features = ["std", "cargo"] }
cloudproof = { workspace = true }
cloudproof_findex = { workspace = true }
cosmian_kmip = { path = "../kmip" }
cosmian_kms_crypto = { path = "../crypto" }
cosmian_kms_interfaces = { path = "../interfaces" }
hex = { workspace = true }
lazy_static = { workspace = true }
lru = { workspace = true }
num_cpus = { workspace = true }
rawsql = "0.1"
redis = { version = "0.23", features = [
    "aio",
    "ahash",
    "script",
    "connection-manager",
    "tokio-comp",
] }
serde = { workspace = true }
serde_json = { workspace = true }
sqlx = { version = "0.8.2", default-features = false, features = [
    "json",
    "runtime-tokio-native-tls",
    "mysql",
    "postgres",
    "sqlite",
] }
thiserror = { workspace = true }
tiny-keccak = "2.0.2"
tokio = { workspace = true, features = ["full"] }
tracing = { workspace = true }
url = { workspace = true }
uuid = { workspace = true }
version-compare = { workspace = true }
zeroize = { workspace = true }

[dev-dependencies]
cosmian_logger = { workspace = true }
tempfile = { workspace = true }
tracing = { workspace = true }
